{"version":3,"sources":["scripts/helper.js","scripts/process_golden_globes.js","scripts/process_oscars.js","scripts/process_additional_movie_data.js","scripts/process_imdb.js","scripts/preprocess_data.js","index.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["cleanMovieName","name","nameStr","String","articlePattern","articleMatch","match","concat","toLowerCase","replace","adjustForInflation","moneterayAmount","movieYear","topYear","nYears","inflationRate","i","Number","toFixed","parseRuntime","runtimeString","totalMins","hoursMatch","minutesMatch","parseInt","stopWords","exports","Set","_helper","require","_typeof","o","Symbol","iterator","constructor","prototype","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_toPrimitive","toPrimitive","call","TypeError","getGoldenGlobesMovieData","goldenGlobes","movieNames","reduce","acc","item","cleanName","film","includes","isWinner","win","nominations","year","year_film","nominee","winner","nbNominations","nbWins","addGoldenGlobesData","imdb","goldenGlobesMovies","map","movie","enhancedMovie","goldenGlobesData","goldenGlobesNominees","goldenGlobesNominations","goldenGlobesWins","getOscarsMovieData","oscars","addOscarsData","oscarMovies","oscarsData","oscarNominees","oscarNominations","oscarWins","getAdditionalMovieData","movies","original_title","companies","production_companies","pCompaniesData","JSON","parse","Array","isArray","pCompany","Boolean","releaseDate","release_date","Date","toISOString","split","error","keywords","popularity","productionCompanies","budget","revenue","addAdditionalMovieData","additionalData","boxOffice","processMovieData","data","stringToArray","fieldName","trim","processedMovie","fieldsToProcess","field","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","a","_arrayLikeToArray","toString","slice","from","test","n","l","u","f","next","done","return","MetricsHelper","standardMetrics","property","movieProperty","createMetricsObject","metricsObject","metric","charAt","toUpperCase","addMovieMetrics","currObject","totalProp","countProp","isNaN","calculateAverages","avgProp","cleanupMetricsProperties","findMostPopularGenre","genres","genreCounts","genre","maxCount","mostPopularGenre","entries","_ref","_ref2","count","getFilmContributorsData","contributors","casts","directors","writers","contributorCategories","createContributorObject","nMovies","movieInfo","_ref3","_ref4","categoryName","person","category","getGenreDataIntervals","decades","createYearIntervals","decade","mostCommonGenre","allGenres","_MetricsHelper$findMo","intervalSize","undefined","minYear","min","MAX_VALUE","maxYear","max","MIN_VALUE","firstDecade","Math","floor","lastDecade","intervals","decadeYears","startYear","endYear","label","interval","find","getTopCollaborations","limit","allCollabs","countCollaborations","topActorDirectorCollabs","actorDirectorCollabs","topActorActorCollabs","actorActorCollabs","createCollabObject","isSameType","participant1","participant2","addMovieToCollab","collab","castMembers","actor","director","key","actor1","j","actor2","actorPair","sort","finalizeCollabs","collabs","values","_MetricsHelper$findMo2","b","getCertificateData","createCertificateObject","certificateData","certificateList","certificate","_MetricsHelper$findMo3","getDataBySeason","createSeasonObject","beginDate","endDate","seasons","spring","summer","fall","winter","getSeason","dateString","_dateString$split$map","num","_dateString$split$map2","month","day","monthDay","padStart","season","_MetricsHelper$findMo4","getMovieLengthData","minRuntime","maxRuntime","runtime","run_time","firstInterval","lastInterval","minutes","startMinutes","endMinutes","movieRuntime","_MetricsHelper$findMo5","getTaglineWordsData","minWordLength","minOccurrences","createWordObject","wordCounts","tagline","words","word","has","significantWords","wordData","movieWords","_MetricsHelper$findMo6","result","_ref5","_ref6","getTaglineLengthData","lengthMap","createLengthObject","wordCount","_ref7","_ref8","avgWordCount","calculateMovieProfits","box_office","profit","getMoviesByGenre","genreData","genreName","_process_golden_globes","_process_oscars","_process_additional_movie_data","_process_imdb","_preprocess_data","d3","Promise","all","csv","autoType","then","additionalMovieData","console","log","contributorData","genreIntervalData","collaborationsData","seasonalData","movieLengthData","taglineWordData","taglineLengthData","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.e31bb0bc.js","sourceRoot":"..\\src","sourcesContent":["\r\n// /**\r\n//  * Generates the SVG element g which will contain the data visualisation.\r\n//  *\r\n//  * @param {object} margin The desired margins around the graph\r\n//  * @returns {*} The d3 Selection for the created g element\r\n//  */\r\n// export function generateG (margin) {\r\n//   return d3.select('.graph')\r\n//     .select('svg')\r\n//     .append('g')\r\n//     .attr('id', 'graph-g')\r\n//     .attr('transform',\r\n//       'translate(' + margin.left + ',' + margin.top + ')')\r\n// }\r\n\r\n// /**\r\n//  * Sets the size of the SVG canvas containing the graph.\r\n//  *\r\n//  * @param {number} width The desired width\r\n//  * @param {number} height The desired height\r\n//  */\r\n// export function setCanvasSize (width, height) {\r\n//   d3.select('#heatmap').select('svg')\r\n//     .attr('width', width)\r\n//     .attr('height', height)\r\n// }\r\n\r\n// /**\r\n//  * Appends an SVG g element which will contain the axes.\r\n//  *\r\n//  * @param {*} g The d3 Selection of the graph's g SVG element\r\n//  */\r\n// export function appendAxes (g) {\r\n//   g.append('g')\r\n//     .attr('class', 'x axis')\r\n\r\n//   g.append('g')\r\n//     .attr('class', 'y axis')\r\n// }\r\n\r\n/**\r\n * Cleans the name to avoid mismatching during the comparison of movie names\r\n *\r\n * @param {string} name The movie name to clean\r\n * @returns {string} the cleaned movie name\r\n */\r\nexport function cleanMovieName (name) {\r\n  let nameStr = String(name)\r\n  const articlePattern = /^(.+),\\s+(The|A|An)$/i\r\n  const articleMatch = nameStr.match(articlePattern)\r\n\r\n  if (articleMatch) nameStr = `${articleMatch[2]} ${articleMatch[1]}`\r\n  return nameStr.toLowerCase().replace(/[^a-z0-9\\s]/g, '')\r\n}\r\n\r\n/**\r\n * Adjusts a monetary amount for inflation based on the year difference\r\n *\r\n * @param {number} moneterayAmount The original monetary amount to adjust\r\n * @param {number} movieYear The year of the original amount\r\n * @param {number} topYear The year to adjust the amount to\r\n * @returns {number} The inflation-adjusted amount, rounded to 2 decimal places\r\n */\r\nexport function adjustForInflation (moneterayAmount, movieYear, topYear) {\r\n  const nYears = topYear - movieYear\r\n  const inflationRate = 1 + (3.3 / 100)\r\n\r\n  for (let i = 0; i < nYears; i++) {\r\n    moneterayAmount *= inflationRate\r\n  }\r\n\r\n  return Number(moneterayAmount.toFixed(2))\r\n}\r\n\r\n/**\r\n * Parses a runtime string into total minutes\r\n *\r\n * @param {string} runtimeString A string representing the runtime in hours and/or minutes\r\n * @returns {number|null} The total runtime in minutes, or null if invalid input\r\n */\r\nexport function parseRuntime (runtimeString) {\r\n  if (!runtimeString || typeof runtimeString !== 'string') return null\r\n  let totalMins = 0\r\n\r\n  const hoursMatch = runtimeString.match(/(\\d+)h/)\r\n  const minutesMatch = runtimeString.match(/(\\d+)m/)\r\n\r\n  if (hoursMatch && hoursMatch[1]) totalMins += parseInt(hoursMatch[1], 10) * 60\r\n  if (minutesMatch && minutesMatch[1]) totalMins += parseInt(minutesMatch[1], 10)\r\n\r\n  return totalMins > 0 ? totalMins : null\r\n}\r\n\r\nexport const stopWords = new Set([\r\n  'about', 'after', 'again', 'against', 'all', 'also', 'and', 'any', 'are', 'because',\r\n  'been', 'before', 'being', 'between', 'both', 'but', 'can', 'cant', 'could', 'did', 'does',\r\n  'doing', 'dont', 'down', 'during', 'each', 'few', 'for', 'from', 'further', 'had', 'has',\r\n  'have', 'having', 'his', 'here', 'how', 'into', 'its', 'just', 'more', 'most', 'not', 'now', 'off',\r\n  'once', 'only', 'other', 'over', 'same', 'should', 'some', 'such', 'than', 'that',\r\n  'the', 'their', 'them', 'then', 'there', 'theres', 'these', 'they', 'this', 'those', 'through',\r\n  'too', 'under', 'until', 'very', 'was', 'were', 'what', 'when', 'where', 'which',\r\n  'while', 'who', 'whom', 'why', 'will', 'with', 'would', 'your'\r\n])\r\n","import { cleanMovieName } from './helper'\r\n\r\n/**\r\n * Gets the data for golden globes nominations for all the movies in the top 250 in IMDB\r\n *\r\n * @param {object[]} goldenGlobes The golden globes data to analyze\r\n * @param {object[]} movieNames The names of the top 250 movies on IMDB\r\n * @returns {object} The golden globes data of the top 250 movies on IMDB\r\n */\r\nexport function getGoldenGlobesMovieData (goldenGlobes, movieNames) {\r\n  return goldenGlobes.reduce((acc, item) => {\r\n    const cleanName = cleanMovieName(item.film)\r\n\r\n    if (movieNames.includes(cleanName)) {\r\n      const isWinner = item.win === 'True'\r\n      if (!acc[cleanName]) {\r\n        acc[cleanName] = {\r\n          nominations: [{ year: item.year_film, nominee: item.name, winner: isWinner }],\r\n          nbNominations: 1,\r\n          nbWins: isWinner ? 1 : 0\r\n        }\r\n      } else {\r\n        acc[cleanName].nominations.push({\r\n          year: item.year_film,\r\n          nominee: item.name,\r\n          winner: isWinner\r\n        })\r\n\r\n        acc[cleanName].nbNominations++\r\n        if (isWinner) acc[cleanName].nbWins++\r\n      }\r\n    }\r\n\r\n    return acc\r\n  }, {})\r\n}\r\n\r\n/**\r\n * Add the data collected from the golden globes awards to the imdb data\r\n *\r\n * @param {object[]} imdb The data of the top 250 movies on IMDB\r\n * @param {object} goldenGlobesMovies The golden globes data of the movies in the top 250 on IMDB\r\n * @returns {object} The imdb data concatenated with the golden globes data\r\n */\r\nexport function addGoldenGlobesData (imdb, goldenGlobesMovies) {\r\n  return imdb.map(movie => {\r\n    const enhancedMovie = { ...movie }\r\n    const cleanName = cleanMovieName(movie.name)\r\n\r\n    enhancedMovie.goldenGlobesData = {\r\n      goldenGlobesNominees: goldenGlobesMovies[cleanName] ? goldenGlobesMovies[cleanName].nominations : [],\r\n      goldenGlobesNominations: goldenGlobesMovies[cleanName] ? goldenGlobesMovies[cleanName].nbNominations : 0,\r\n      goldenGlobesWins: goldenGlobesMovies[cleanName] ? goldenGlobesMovies[cleanName].nbWins : 0\r\n    }\r\n\r\n    return enhancedMovie\r\n  })\r\n}\r\n","import { cleanMovieName } from './helper'\r\n\r\n/**\r\n * Gets the data for oscar nominations for all the movies in the top 250 in IMDB\r\n *\r\n * @param {object[]} oscars The oscars data to analyze\r\n * @param {string[]} movieNames The names of the top 250 movies on IMDB\r\n * @returns {object} The oscars data of the top 250 movies on IMDB\r\n */\r\nexport function getOscarsMovieData (oscars, movieNames) {\r\n  return oscars.reduce((acc, item) => {\r\n    const cleanName = cleanMovieName(item.film)\r\n\r\n    if (movieNames.includes(cleanName)) {\r\n      const isWinner = item.winner === 'True'\r\n      if (!acc[cleanName]) {\r\n        acc[cleanName] = {\r\n          nominations: [{ year: item.year_film, nominee: item.name, winner: isWinner }],\r\n          nbNominations: 1,\r\n          nbWins: isWinner ? 1 : 0\r\n        }\r\n      } else {\r\n        acc[cleanName].nominations.push({\r\n          year: item.year_film,\r\n          nominee: item.name,\r\n          winner: isWinner\r\n        })\r\n\r\n        acc[cleanName].nbNominations++\r\n        if (isWinner) acc[cleanName].nbWins++\r\n      }\r\n    }\r\n\r\n    return acc\r\n  }, {})\r\n}\r\n\r\n/**\r\n * Add the data collected from the oscars awards to the imdb data\r\n *\r\n * @param {object[]} imdb The data of the top 250 movies on IMDB\r\n * @param {object} oscarMovies The oscars data of the movies in the top 250 on IMDB\r\n * @returns {object} The imdb data concatenated with the oscars data\r\n */\r\nexport function addOscarsData (imdb, oscarMovies) {\r\n  return imdb.map(movie => {\r\n    const enhancedMovie = { ...movie }\r\n    const cleanName = cleanMovieName(movie.name)\r\n\r\n    enhancedMovie.oscarsData = {\r\n      oscarNominees: oscarMovies[cleanName] ? oscarMovies[cleanName].nominations : [],\r\n      oscarNominations: oscarMovies[cleanName] ? oscarMovies[cleanName].nbNominations : 0,\r\n      oscarWins: oscarMovies[cleanName] ? oscarMovies[cleanName].nbWins : 0\r\n    }\r\n\r\n    return enhancedMovie\r\n  })\r\n}\r\n","import { cleanMovieName } from './helper'\r\n\r\n/**\r\n * Gets the additional data required for all the movies in the top 250 in IMDB\r\n *\r\n * @param {object[]} movies The additional movie data to analyze\r\n * @param {object[]} movieNames The names of the top 250 movies on IMDB\r\n * @returns {object} The additonal movie data of the top 250 movies on IMDB\r\n */\r\nexport function getAdditionalMovieData (movies, movieNames) {\r\n  return movies.reduce((acc, movie) => {\r\n    if (!movie.original_title) return acc\r\n\r\n    const cleanName = cleanMovieName(movie.original_title)\r\n\r\n    if (movieNames.includes(cleanName)) {\r\n      let companies = []\r\n      if (movie.production_companies) {\r\n        const pCompaniesData = typeof movie.production_companies === 'string'\r\n          ? JSON.parse(movie.production_companies) : movie.production_companies\r\n\r\n        if (Array.isArray(pCompaniesData) && pCompaniesData.length > 0) {\r\n          companies = pCompaniesData.map(pCompany => pCompany.name).filter(Boolean)\r\n        }\r\n      }\r\n\r\n      let releaseDate = ''\r\n      if (movie.release_date) {\r\n        try {\r\n          releaseDate = new Date(movie.release_date).toISOString().split('T')[0]\r\n        } catch (error) {\r\n          releaseDate = movie.release_date\r\n        }\r\n      }\r\n\r\n      acc[cleanName] = {\r\n        keywords: movie.keywords || '',\r\n        popularity: movie.popularity || 0,\r\n        productionCompanies: companies,\r\n        releaseDate: releaseDate,\r\n        budget: movie.budget,\r\n        revenue: movie.revenue\r\n      }\r\n    }\r\n    return acc\r\n  }, {})\r\n}\r\n\r\n/**\r\n * Add the additional movie data to the imdb data\r\n *\r\n * @param {object[]} imdb The data of the top 250 movies on IMDB\r\n * @param {object} additionalData The additional data of the movies in the top 250 on IMDB\r\n * @returns {object} The imdb data concatenated with the oscars data\r\n */\r\nexport function addAdditionalMovieData (imdb, additionalData) {\r\n  return imdb.map(movie => {\r\n    const enhancedMovie = { ...movie }\r\n    const cleanName = cleanMovieName(movie.name)\r\n\r\n    enhancedMovie.keywords = additionalData[cleanName] ? additionalData[cleanName].keywords : []\r\n    enhancedMovie.popularity = additionalData[cleanName] ? additionalData[cleanName].popularity : 0\r\n    enhancedMovie.productionCompanies = additionalData[cleanName] ? additionalData[cleanName].productionCompanies : {}\r\n    enhancedMovie.releaseDate = additionalData[cleanName] ? additionalData[cleanName].releaseDate : null\r\n\r\n    if (typeof enhancedMovie.budget === 'string' && additionalData[cleanName]) {\r\n      enhancedMovie.budget = additionalData[cleanName].budget\r\n    }\r\n\r\n    if (typeof enhancedMovie.boxOffice === 'string' && additionalData[cleanName]) {\r\n      enhancedMovie.boxOffice = additionalData[cleanName].revenue\r\n    }\r\n\r\n    return enhancedMovie\r\n  })\r\n}\r\n","/**\r\n * Fix the field values in order to proceed with processing\r\n *\r\n * @param {object[]} data The top 250 movies on IMDB\r\n * @returns {object} The correct value types for all the various fields of the data\r\n */\r\nexport function processMovieData (data) {\r\n  const stringToArray = (movie, fieldName) => {\r\n    if (!movie[fieldName]) return []\r\n\r\n    try {\r\n      if (typeof movie[fieldName] === 'string') {\r\n        return movie[fieldName].split(',').map(item => item.trim())\r\n      }\r\n      return movie[fieldName]\r\n    } catch (error) {\r\n      return []\r\n    }\r\n  }\r\n\r\n  return data.map((movie) => {\r\n    const processedMovie = { ...movie }\r\n    const fieldsToProcess = ['casts', 'directors', 'genre', 'writers']\r\n\r\n    fieldsToProcess.forEach(field => {\r\n      processedMovie[field] = stringToArray(movie, field)\r\n    })\r\n\r\n    return processedMovie\r\n  })\r\n}\r\n","import { stopWords, parseRuntime } from './helper'\r\n\r\n/**\r\n * Helper functions for metrics calculations (averages, quantity, etc)\r\n */\r\nconst MetricsHelper = {\r\n  standardMetrics: [\r\n    { property: 'rating', movieProperty: 'rating' },\r\n    { property: 'budget', movieProperty: 'budget' },\r\n    { property: 'boxOffice', movieProperty: 'box_office' },\r\n    { property: 'popularity', movieProperty: 'popularity' }\r\n  ],\r\n\r\n  /**\r\n   * Creates an object with new metrics with initialized properties for current standard metrics\r\n   *\r\n   * @returns {object} An object with total value and count properties for each of the standard metrics\r\n   */\r\n  createMetricsObject () {\r\n    const metricsObject = {}\r\n\r\n    this.standardMetrics.forEach(metric => {\r\n      metricsObject[`total${metric.property.charAt(0).toUpperCase() + metric.property.slice(1)}`] = 0\r\n      metricsObject[`${metric.property}Count`] = 0\r\n      metricsObject[`avg${metric.property.charAt(0).toUpperCase() + metric.property.slice(1)}`] = 0\r\n    })\r\n\r\n    return metricsObject\r\n  },\r\n\r\n  /**\r\n   * Adds the new metrics of a movie to an existing object\r\n   *\r\n   * @param {object} currObject The current object to which we will be adding the new metrics to\r\n   * @param {object} movie The movie object which contains the metric values required\r\n   * @returns {object} The updated current object with the new metrics\r\n   */\r\n  addMovieMetrics (currObject, movie) {\r\n    this.standardMetrics.forEach(metric => {\r\n      const value = movie[metric.movieProperty]\r\n      const totalProp = `total${metric.property.charAt(0).toUpperCase() + metric.property.slice(1)}`\r\n      const countProp = `${metric.property}Count`\r\n\r\n      if (typeof value === 'number' && !isNaN(value)) {\r\n        currObject[totalProp] += value\r\n        currObject[countProp]++\r\n      }\r\n    })\r\n\r\n    return currObject\r\n  },\r\n\r\n  /**\r\n   * Calculates the average values for all standard metrics of a given metrics object\r\n   *\r\n   * @param {object} currObject The metrics object to which we need to calculate the averages of the standard\r\n   * metrics for\r\n   * @returns {object} The metrics object with the calculated averages added to it\r\n   */\r\n  calculateAverages (currObject) {\r\n    this.standardMetrics.forEach(metric => {\r\n      const totalProp = `total${metric.property.charAt(0).toUpperCase() + metric.property.slice(1)}`\r\n      const countProp = `${metric.property}Count`\r\n      const avgProp = `avg${metric.property.charAt(0).toUpperCase() + metric.property.slice(1)}`\r\n\r\n      currObject[avgProp] = currObject[countProp] > 0 ? currObject[totalProp] / currObject[countProp] : 0\r\n    })\r\n\r\n    return currObject\r\n  },\r\n\r\n  /**\r\n   * Removes the temporary calculation properties, such as the total and count, from the current object\r\n   *\r\n   * @param {object} currObject The current object on which to remove the additional metrics\r\n   * @returns {object} The current cleaned metrics object\r\n   */\r\n  cleanupMetricsProperties (currObject) {\r\n    this.standardMetrics.forEach(metric => {\r\n      const totalProp = `total${metric.property.charAt(0).toUpperCase() + metric.property.slice(1)}`\r\n      const countProp = `${metric.property}Count`\r\n\r\n      delete currObject[totalProp]\r\n      delete currObject[countProp]\r\n    })\r\n\r\n    return currObject\r\n  },\r\n\r\n  /**\r\n   * Finds the most popular genre from an array of genres\r\n   *\r\n   * @param {string[]} genres Array of genre names\r\n   * @returns {object|null} Object containing most popular genre and counts\r\n   */\r\n  findMostPopularGenre (genres) {\r\n    if (!genres || !genres.length) return null\r\n\r\n    const genreCounts = {}\r\n    genres.forEach(genre => {\r\n      if (genre && genre.trim()) {\r\n        genreCounts[genre.trim()] = (genreCounts[genre.trim()] || 0) + 1\r\n      }\r\n    })\r\n\r\n    let maxCount = 0\r\n    let mostPopularGenre = null\r\n\r\n    Object.entries(genreCounts).forEach(([genre, count]) => {\r\n      if (count > maxCount) {\r\n        maxCount = count\r\n        mostPopularGenre = genre\r\n      }\r\n    })\r\n\r\n    return { mostPopularGenre, genreCounts }\r\n  }\r\n}\r\n\r\n/**\r\n * Gets important movie data associated to each contributor of the top 250 movies on IMDB\r\n * with additional statistics\r\n *\r\n * @param {object[]} movies The data of the movies\r\n * @returns {object} The casts, directors, and writers associated to the top 250 movies on IMDB\r\n */\r\nexport function getFilmContributorsData (movies) {\r\n  const contributors = {\r\n    casts: {},\r\n    directors: {},\r\n    writers: {}\r\n  }\r\n\r\n  const contributorCategories = {\r\n    casts: 'casts',\r\n    directors: 'directors',\r\n    writers: 'writers'\r\n  }\r\n\r\n  const createContributorObject = () => {\r\n    return {\r\n      movies: [],\r\n      nMovies: 0,\r\n      ...MetricsHelper.createMetricsObject()\r\n    }\r\n  }\r\n\r\n  movies.forEach(movie => {\r\n    const movieInfo = {\r\n      name: movie.name,\r\n      genre: movie.genre || []\r\n    }\r\n\r\n    Object.entries(contributorCategories).forEach(([movieProperty, categoryName]) => {\r\n      if (movie[movieProperty]) {\r\n        movie[movieProperty].forEach(person => {\r\n          if (!contributors[categoryName][person]) {\r\n            contributors[categoryName][person] = createContributorObject()\r\n          }\r\n\r\n          contributors[categoryName][person].movies.push({ ...movieInfo })\r\n          contributors[categoryName][person].nMovies = contributors[categoryName][person].movies.length\r\n\r\n          MetricsHelper.addMovieMetrics(contributors[categoryName][person], movie)\r\n        })\r\n      }\r\n    })\r\n  })\r\n\r\n  Object.keys(contributors).forEach(category => {\r\n    Object.keys(contributors[category]).forEach(person => {\r\n      const data = contributors[category][person]\r\n\r\n      MetricsHelper.calculateAverages(data)\r\n      MetricsHelper.cleanupMetricsProperties(data)\r\n    })\r\n  })\r\n\r\n  return contributors\r\n}\r\n\r\n/**\r\n * Analyzes genre data for movies across different time periods\r\n *\r\n * @param {object[]} movies Array of movie objects\r\n * @returns {object[]} Array of interval objects by a set of years with genre and movie analysis\r\n */\r\nexport function getGenreDataIntervals (movies) {\r\n  const decades = createYearIntervals(movies)\r\n\r\n  decades.forEach(decade => {\r\n    if (!decade.movies.length) {\r\n      decade.mostCommonGenre = null\r\n      decade.genreCounts = {}\r\n      return\r\n    }\r\n\r\n    const allGenres = []\r\n    decade.movies.forEach(movie => {\r\n      if (movie.genre && Array.isArray(movie.genre)) {\r\n        movie.genre.forEach(genre => {\r\n          if (genre && genre.trim()) allGenres.push(genre.trim())\r\n        })\r\n      }\r\n    })\r\n\r\n    const { mostPopularGenre, genreCounts } = MetricsHelper.findMostPopularGenre(allGenres)\r\n    decade.mostCommonGenre = mostPopularGenre\r\n    decade.genreCounts = genreCounts\r\n  })\r\n\r\n  return decades\r\n}\r\n\r\n/**\r\n * Creates time intervals for movies based on their release years\r\n *\r\n * @param {object[]} movies Array of movie objects\r\n * @param {number} intervalSize Size of each interval in years (10 by default)\r\n * @returns {object[]} Array of interval objects with movies and their metrics\r\n */\r\nexport function createYearIntervals (movies, intervalSize = 10) {\r\n  const minYear = movies.reduce((min, movie) => movie.year < min ? movie.year : min, Number.MAX_VALUE)\r\n  const maxYear = movies.reduce((max, movie) => movie.year > max ? movie.year : max, Number.MIN_VALUE)\r\n\r\n  const firstDecade = Math.floor(minYear / intervalSize) * intervalSize\r\n  const lastDecade = Math.floor(maxYear / intervalSize) * intervalSize\r\n\r\n  const intervals = []\r\n  for (let decade = firstDecade; decade <= lastDecade; decade += intervalSize) {\r\n    const decadeYears = decade + (intervalSize - 1)\r\n    intervals.push({\r\n      startYear: decade,\r\n      endYear: decadeYears,\r\n      label: `${decade}s`,\r\n      movies: [],\r\n      nMovies: 0,\r\n      genreCounts: {},\r\n      ...MetricsHelper.createMetricsObject()\r\n    })\r\n  }\r\n\r\n  movies.forEach(movie => {\r\n    const interval = intervals.find(interval => movie.year >= interval.startYear && movie.year <= interval.endYear)\r\n    if (!interval) return\r\n\r\n    interval.movies.push(movie)\r\n    interval.nMovies++\r\n\r\n    MetricsHelper.addMovieMetrics(interval, movie)\r\n  })\r\n\r\n  intervals.forEach(interval => {\r\n    MetricsHelper.calculateAverages(interval)\r\n    MetricsHelper.cleanupMetricsProperties(interval)\r\n  })\r\n\r\n  return intervals\r\n}\r\n\r\n/**\r\n * Gets the top collaborations for actor/director and actor/actor collaborations\r\n *\r\n * @param {Array} movies Array of movie objects\r\n * @param {number} limit Number of top collaborations to return (20 by default)\r\n * @returns {object} Object with the top actor/director and actor/actor collaborations\r\n */\r\nexport function getTopCollaborations (movies, limit = 20) {\r\n  const allCollabs = countCollaborations(movies)\r\n\r\n  return {\r\n    topActorDirectorCollabs: allCollabs.actorDirectorCollabs.slice(0, limit),\r\n    topActorActorCollabs: allCollabs.actorActorCollabs.slice(0, limit)\r\n  }\r\n}\r\n\r\n/**\r\n * Counts the amount of collaborations between actors and directors, and also between actors themselves\r\n *\r\n * @param {Array} movies Array of movie objects with casts and directors properties\r\n * @returns {object} Object containing actorDirectorCollabs and actorActorCollabs\r\n */\r\nfunction countCollaborations (movies) {\r\n  const actorDirectorCollabs = {}\r\n  const actorActorCollabs = {}\r\n\r\n  const createCollabObject = (isSameType, participant1, participant2) => {\r\n    return {\r\n      [isSameType ? 'actor1' : 'actor']: participant1,\r\n      [isSameType ? 'actor2' : 'director']: participant2,\r\n      movies: [],\r\n      genres: [],\r\n      mostPopularGenre: null,\r\n      count: 0,\r\n      ...MetricsHelper.createMetricsObject()\r\n    }\r\n  }\r\n\r\n  const addMovieToCollab = (collab, movie) => {\r\n    if (collab.movies.includes(movie.name)) return\r\n\r\n    collab.count++\r\n    collab.movies.push(movie.name)\r\n\r\n    MetricsHelper.addMovieMetrics(collab, movie)\r\n\r\n    if (movie.genre) {\r\n      const genres = Array.isArray(movie.genre) ? movie.genre : [movie.genre]\r\n      genres.forEach(genre => {\r\n        if (genre && genre.trim()) collab.genres.push(genre.trim())\r\n      })\r\n    }\r\n  }\r\n\r\n  movies.forEach(movie => {\r\n    const castMembers = movie.casts || []\r\n    const directors = movie.directors || []\r\n\r\n    castMembers.forEach(actor => {\r\n      if (!actor) return\r\n\r\n      directors.forEach(director => {\r\n        if (!director) return\r\n\r\n        const key = `${actor}/${director}`\r\n\r\n        if (!actorDirectorCollabs[key]) {\r\n          actorDirectorCollabs[key] = createCollabObject(false, actor, director)\r\n        }\r\n\r\n        addMovieToCollab(actorDirectorCollabs[key], movie)\r\n      })\r\n    })\r\n\r\n    for (let i = 0; i < castMembers.length; i++) {\r\n      const actor1 = castMembers[i]\r\n      if (!actor1) continue\r\n\r\n      for (let j = i + 1; j < castMembers.length; j++) {\r\n        const actor2 = castMembers[j]\r\n        if (!actor2) continue\r\n\r\n        const actorPair = [actor1, actor2].sort()\r\n        const key = `${actorPair[0]}/${actorPair[1]}`\r\n\r\n        if (!actorActorCollabs[key]) {\r\n          actorActorCollabs[key] = createCollabObject(true, actorPair[0], actorPair[1])\r\n        }\r\n\r\n        addMovieToCollab(actorActorCollabs[key], movie)\r\n      }\r\n    }\r\n  })\r\n\r\n  const finalizeCollabs = collabs => {\r\n    return Object.values(collabs).map(collab => {\r\n      MetricsHelper.calculateAverages(collab)\r\n\r\n      if (collab.genres.length) {\r\n        const { mostPopularGenre } = MetricsHelper.findMostPopularGenre(collab.genres)\r\n        collab.mostPopularGenre = mostPopularGenre\r\n      }\r\n\r\n      MetricsHelper.cleanupMetricsProperties(collab)\r\n      delete collab.genres\r\n\r\n      return collab\r\n    }).sort((a, b) => b.count - a.count)\r\n  }\r\n\r\n  return {\r\n    actorDirectorCollabs: finalizeCollabs(actorDirectorCollabs),\r\n    actorActorCollabs: finalizeCollabs(actorActorCollabs)\r\n  }\r\n}\r\n\r\n/**\r\n * Analyzes the movie data by the available certificate ratings\r\n *\r\n * @param {object[]} movies Array of movie objects\r\n * @returns {object} Object with certificate data and associated metrics\r\n */\r\nexport function getCertificateData (movies) {\r\n  const createCertificateObject = () => {\r\n    return {\r\n      movies: [],\r\n      count: 0,\r\n      genres: [],\r\n      mostPopularGenre: null,\r\n      ...MetricsHelper.createMetricsObject()\r\n    }\r\n  }\r\n\r\n  const certificateData = movies.reduce((certificateList, movie) => {\r\n    const certificate = typeof movie.certificate === 'string' ? movie.certificate.toLowerCase() : 'unknown'\r\n\r\n    if (!certificateList[certificate]) certificateList[certificate] = createCertificateObject()\r\n\r\n    certificateList[certificate].movies.push({ name: movie.name })\r\n    certificateList[certificate].count++\r\n\r\n    MetricsHelper.addMovieMetrics(certificateList[certificate], movie)\r\n\r\n    if (movie.genre) {\r\n      const genres = Array.isArray(movie.genre) ? movie.genre : [movie.genre]\r\n      genres.forEach(genre => {\r\n        if (genre && genre.trim()) certificateList[certificate].genres.push(genre.trim())\r\n      })\r\n    }\r\n\r\n    return certificateList\r\n  }, {})\r\n\r\n  Object.keys(certificateData).forEach(certificate => {\r\n    const data = certificateData[certificate]\r\n    MetricsHelper.calculateAverages(data)\r\n\r\n    if (data.genres.length) {\r\n      const { mostPopularGenre, genreCounts } = MetricsHelper.findMostPopularGenre(data.genres)\r\n      data.mostPopularGenre = mostPopularGenre\r\n      data.genreCounts = genreCounts\r\n    }\r\n\r\n    MetricsHelper.cleanupMetricsProperties(data)\r\n    delete data.genres\r\n  })\r\n\r\n  return certificateData\r\n}\r\n\r\n/**\r\n * Groups the movie data by seasons (summer, fall, winter, spring) based on release dates\r\n *\r\n * @param {object[]} movies Array of movie objects\r\n * @returns {object} Object with movie data organized by season and their associated metrics\r\n */\r\nexport function getDataBySeason (movies) {\r\n  const createSeasonObject = (beginDate, endDate) => ({\r\n    beginDate,\r\n    endDate,\r\n    movies: [],\r\n    count: 0,\r\n    genres: [],\r\n    mostPopularGenre: null,\r\n    ...MetricsHelper.createMetricsObject()\r\n  })\r\n\r\n  const seasons = {\r\n    spring: createSeasonObject('03-20', '06-20'),\r\n    summer: createSeasonObject('06-21', '09-22'),\r\n    fall: createSeasonObject('09-23', '12-20'),\r\n    winter: createSeasonObject('12-21', '03-19')\r\n  }\r\n\r\n  const getSeason = (dateString) => {\r\n    if (!dateString || typeof dateString !== 'string') return null\r\n\r\n    // Reason : We need to split the string, however year is not required for use\r\n    // eslint-disable-next-line no-unused-vars\r\n    const [year, month, day] = dateString.split('-').map(num => parseInt(num, 10))\r\n    const monthDay = `${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`\r\n\r\n    if (monthDay >= '03-20' && monthDay <= '06-20') return 'spring'\r\n    else if (monthDay >= '06-21' && monthDay <= '09-22') return 'summer'\r\n    else if (monthDay >= '09-23' && monthDay <= '12-20') return 'fall'\r\n    else return 'winter'\r\n  }\r\n\r\n  movies.forEach(movie => {\r\n    const season = getSeason(movie.releaseDate)\r\n    if (season === null) return\r\n\r\n    seasons[season].movies.push(movie)\r\n    seasons[season].count++\r\n\r\n    MetricsHelper.addMovieMetrics(seasons[season], movie)\r\n\r\n    if (movie.genre) {\r\n      const genres = Array.isArray(movie.genre) ? movie.genre : [movie.genre]\r\n      genres.forEach(genre => {\r\n        if (genre && genre.trim()) seasons[season].genres.push(genre.trim())\r\n      })\r\n    }\r\n  })\r\n\r\n  Object.keys(seasons).forEach(season => {\r\n    const data = seasons[season]\r\n    MetricsHelper.calculateAverages(data)\r\n\r\n    if (data.genres.length) {\r\n      const { mostPopularGenre, genreCounts } = MetricsHelper.findMostPopularGenre(data.genres)\r\n      data.mostPopularGenre = mostPopularGenre\r\n      data.genreCounts = genreCounts\r\n    }\r\n\r\n    MetricsHelper.cleanupMetricsProperties(data)\r\n    delete data.genres\r\n  })\r\n\r\n  return seasons\r\n}\r\n\r\n/**\r\n * Groups and analyzes movies by given runtime length intervals\r\n *\r\n * @param {object[]} movies Array of movie objects\r\n * @param {number} intervalSize Size of each runtime interval in minutes (10 by default)\r\n * @returns {object[]} Array of runtime interval objects with their associated movies and metrics\r\n */\r\nexport function getMovieLengthData (movies, intervalSize = 10) {\r\n  let minRuntime = Number.MAX_VALUE\r\n  let maxRuntime = 0\r\n\r\n  movies.forEach(movie => {\r\n    const runtime = parseRuntime(movie.run_time)\r\n    if (runtime) {\r\n      minRuntime = Math.min(minRuntime, runtime)\r\n      maxRuntime = Math.max(maxRuntime, runtime)\r\n    }\r\n  })\r\n\r\n  const firstInterval = Math.floor(minRuntime / intervalSize) * intervalSize\r\n  const lastInterval = Math.floor(maxRuntime / intervalSize) * intervalSize\r\n\r\n  const intervals = []\r\n  for (let minutes = firstInterval; minutes <= lastInterval; minutes += intervalSize) {\r\n    intervals.push({\r\n      startMinutes: minutes,\r\n      endMinutes: minutes + (intervalSize - 1),\r\n      label: `${minutes}s`,\r\n      movies: [],\r\n      nMovies: 0,\r\n      genres: [],\r\n      ...MetricsHelper.createMetricsObject()\r\n    })\r\n  }\r\n\r\n  movies.forEach(movie => {\r\n    const movieRuntime = parseRuntime(movie.run_time)\r\n    const interval = intervals.find(interval => movieRuntime >= interval.startMinutes && movieRuntime <= interval.endMinutes)\r\n    if (!interval) return\r\n\r\n    interval.movies.push(movie)\r\n    interval.nMovies++\r\n\r\n    MetricsHelper.addMovieMetrics(interval, movie)\r\n\r\n    if (movie.genre) {\r\n      const genres = Array.isArray(movie.genre) ? movie.genre : [movie.genre]\r\n      genres.forEach(genre => {\r\n        if (genre && genre.trim()) interval.genres.push(genre.trim())\r\n      })\r\n    }\r\n  })\r\n\r\n  intervals.forEach(interval => {\r\n    MetricsHelper.calculateAverages(interval)\r\n\r\n    if (interval.genres.length) {\r\n      const { mostPopularGenre, genreCounts } = MetricsHelper.findMostPopularGenre(interval.genres)\r\n      interval.mostPopularGenre = mostPopularGenre\r\n      interval.genreCounts = genreCounts\r\n    }\r\n\r\n    MetricsHelper.cleanupMetricsProperties(interval)\r\n    delete interval.genres\r\n  })\r\n\r\n  return intervals\r\n}\r\n\r\n/**\r\n * Analyzes the frequency of appearance for words and associated data in movie taglines\r\n *\r\n * @param {object[]} movies Array of movie objects\r\n * @param {number} minWordLength Minimum length of words to include (3 by default)\r\n * @param {number} minOccurrences Minimum occurrences of words to include (2 by default)\r\n * @returns {object[]} Array of word objects with associated movie data and their metrics\r\n */\r\nexport function getTaglineWordsData (movies, minWordLength = 3, minOccurrences = 2) {\r\n  const createWordObject = () => {\r\n    return {\r\n      movies: [],\r\n      count: 0,\r\n      genres: [],\r\n      mostPopularGenre: null,\r\n      ...MetricsHelper.createMetricsObject()\r\n    }\r\n  }\r\n\r\n  const wordCounts = {}\r\n  movies.forEach(movie => {\r\n    if (!movie.tagline || typeof movie.tagline !== 'string') return\r\n\r\n    const words = movie.tagline\r\n      .toLowerCase()\r\n      .replace(/[^\\w\\s]/g, '')\r\n      .split(/\\s+/)\r\n      .filter(word =>\r\n        word.length >= minWordLength &&\r\n        !stopWords.has(word)\r\n      )\r\n\r\n    words.forEach(word => {\r\n      if (!wordCounts[word]) wordCounts[word] = 0\r\n      wordCounts[word]++\r\n    })\r\n  })\r\n\r\n  const significantWords = Object.keys(wordCounts)\r\n    .filter(word => wordCounts[word] >= minOccurrences)\r\n\r\n  const wordData = {}\r\n  significantWords.forEach(word => {\r\n    wordData[word] = createWordObject()\r\n  })\r\n\r\n  movies.forEach(movie => {\r\n    if (!movie.tagline || typeof movie.tagline !== 'string') return\r\n\r\n    const movieWords = new Set(\r\n      movie.tagline\r\n        .toLowerCase()\r\n        .replace(/[^\\w\\s]/g, '')\r\n        .split(/\\s+/)\r\n        .filter(word => significantWords.includes(word))\r\n    )\r\n\r\n    movieWords.forEach(word => {\r\n      wordData[word].movies.push({\r\n        name: movie.name,\r\n        year: movie.year,\r\n        tagline: movie.tagline\r\n      })\r\n\r\n      wordData[word].count++\r\n\r\n      MetricsHelper.addMovieMetrics(wordData[word], movie)\r\n\r\n      if (movie.genre) {\r\n        const genres = Array.isArray(movie.genre) ? movie.genre : [movie.genre]\r\n        genres.forEach(genre => {\r\n          if (genre && genre.trim()) wordData[word].genres.push(genre.trim())\r\n        })\r\n      }\r\n    })\r\n  })\r\n\r\n  Object.keys(wordData).forEach(word => {\r\n    const data = wordData[word]\r\n    MetricsHelper.calculateAverages(data)\r\n\r\n    if (data.genres.length) {\r\n      const { mostPopularGenre, genreCounts } = MetricsHelper.findMostPopularGenre(data.genres)\r\n      data.mostPopularGenre = mostPopularGenre\r\n      data.genreCounts = genreCounts\r\n    }\r\n\r\n    MetricsHelper.cleanupMetricsProperties(data)\r\n    delete data.genres\r\n  })\r\n\r\n  const result = Object.entries(wordData)\r\n    .map(([word, data]) => ({\r\n      word,\r\n      ...data\r\n    }))\r\n    .sort((a, b) => b.count - a.count)\r\n\r\n  return result\r\n}\r\n\r\n/**\r\n * Analyzes the tagline length statistics and metrics for movies\r\n *\r\n * @param {object[]} movies Array of movie objects\r\n * @returns {object[]} Array of tagline length objects with associated movie data and metrics\r\n */\r\nexport function getTaglineLengthData (movies) {\r\n  const lengthMap = {}\r\n\r\n  const createLengthObject = () => {\r\n    return {\r\n      movies: [],\r\n      count: 0,\r\n      wordCount: 0,\r\n      ...MetricsHelper.createMetricsObject()\r\n    }\r\n  }\r\n\r\n  movies.forEach(movie => {\r\n    if (!movie.tagline || typeof movie.tagline !== 'string') return\r\n\r\n    const tagline = movie.tagline.trim()\r\n    if (tagline.length === 0) return\r\n\r\n    const length = tagline.length\r\n\r\n    if (!lengthMap[length]) lengthMap[length] = createLengthObject()\r\n    lengthMap[length].movies.push({\r\n      name: movie.name,\r\n      year: movie.year,\r\n      tagline: movie.tagline\r\n    })\r\n    lengthMap[length].count++\r\n\r\n    const wordCount = tagline.split(/\\s+/).length\r\n\r\n    lengthMap[length].wordCount += wordCount\r\n    MetricsHelper.addMovieMetrics(lengthMap[length], movie)\r\n  })\r\n\r\n  const result = Object.entries(lengthMap).map(([length, data]) => {\r\n    MetricsHelper.calculateAverages(data)\r\n\r\n    data.avgWordCount = data.wordCount / data.count\r\n    delete data.wordCount\r\n\r\n    MetricsHelper.cleanupMetricsProperties(data)\r\n    delete data.genres\r\n\r\n    return {\r\n      length: parseInt(length, 10),\r\n      ...data\r\n    }\r\n  })\r\n\r\n  return result.sort((a, b) => a.length - b.length)\r\n}\r\n\r\n/**\r\n * Calculates the profit for each movie based on budget and box office data\r\n *\r\n * @param {object[]} imdb Array of movie objects\r\n * @returns {object[]} Array of movie objects with added profit property\r\n */\r\nexport function calculateMovieProfits (imdb) {\r\n  imdb.forEach(movie => {\r\n    if (movie.budget && movie.box_office && typeof movie.budget !== 'string' && typeof movie.box_office !== 'string') {\r\n      movie.profit = movie.box_office - movie.budget\r\n    }\r\n  })\r\n\r\n  return imdb\r\n}\r\n\r\n/**\r\n * Groups and analyzes movies by their genres\r\n *\r\n * @param {object[]} movies Array of movie objects\r\n * @returns {object} Object with the genre data and associated movie metrics\r\n */\r\nexport function getMoviesByGenre (movies) {\r\n  const genreData = {}\r\n\r\n  movies.forEach(movie => {\r\n    const genres = []\r\n\r\n    if (movie.genre) {\r\n      if (Array.isArray(movie.genre)) {\r\n        for (let i = 0; i < movie.genre.length; i++) {\r\n          if (movie.genre[i] && typeof movie.genre[i] === 'string') {\r\n            genres.push(movie.genre[i].trim())\r\n          }\r\n        }\r\n      } else if (typeof movie.genre === 'object') {\r\n        Object.keys(movie.genre).forEach(key => {\r\n          if (movie.genre[key] && typeof movie.genre[key] === 'string') {\r\n            genres.push(movie.genre[key].trim())\r\n          }\r\n        })\r\n      } else if (typeof movie.genre === 'string') genres.push(movie.genre.trim())\r\n    }\r\n\r\n    genres.forEach(genreName => {\r\n      if (!genreData[genreName]) {\r\n        genreData[genreName] = {\r\n          movies: [],\r\n          count: 0,\r\n          ...MetricsHelper.createMetricsObject()\r\n        }\r\n      }\r\n\r\n      genreData[genreName].movies.push(movie)\r\n      genreData[genreName].count++\r\n\r\n      MetricsHelper.addMovieMetrics(genreData[genreName], movie)\r\n    })\r\n  })\r\n\r\n  Object.keys(genreData).forEach(genre => {\r\n    MetricsHelper.calculateAverages(genreData[genre])\r\n    MetricsHelper.cleanupMetricsProperties(genreData[genre])\r\n  })\r\n\r\n  return genreData\r\n}\r\n","// 'use strict'\r\n\r\nimport { addGoldenGlobesData, getGoldenGlobesMovieData } from './scripts/process_golden_globes'\r\nimport { addOscarsData, getOscarsMovieData } from './scripts/process_oscars'\r\nimport { addAdditionalMovieData, getAdditionalMovieData } from './scripts/process_additional_movie_data'\r\nimport { processMovieData } from './scripts/process_imdb'\r\nimport {\r\n  getFilmContributorsData, getGenreDataIntervals,\r\n  getTopCollaborations, getCertificateData, getDataBySeason, getMovieLengthData, getTaglineWordsData, getTaglineLengthData, calculateMovieProfits, getMoviesByGenre\r\n} from './scripts/preprocess_data'\r\n\r\nimport { adjustForInflation } from './scripts/helper.js'\r\n\r\n// import * as helper from './scripts/helper.js'\r\n// import * as preproc from './scripts/preprocess_imbd_data.js'\r\n// import * as viz from './scripts/viz.js'\r\n// import * as legend from './scripts/legend.js'\r\n// import * as hover from './scripts/hover.js'\r\n// import * as util from './scripts/util.js'\r\n\r\n// import * as d3Chromatic from 'd3-scale-chromatic'\r\n\r\n/**\r\n * @file This file is the entry-point for the the code for TP3 for the course INF8808.\r\n * @author Olivia Gélinas\r\n * @version v1.0.0\r\n */\r\n\r\n(function (d3) {\r\n  // let bounds\r\n  // let svgSize\r\n  // let graphSize\r\n\r\n  // const margin = { top: 35, right: 200, bottom: 35, left: 200 }\r\n\r\n  // const xScale = d3.scaleBand().padding(0.05)\r\n  // const yScale = d3.scaleBand().padding(0.2)\r\n  // const colorScale = d3.scaleSequential(d3Chromatic.interpolateYlGnBu)\r\n\r\n  Promise.all([\r\n    d3.csv('./golden_globe_awards.csv', d3.autoType),\r\n    d3.csv('./IMDB_Top_250_Movies.csv', d3.autoType),\r\n    d3.csv('./movie_dataset.csv', d3.autoType),\r\n    d3.csv('./the_oscar_award.csv', d3.autoType)\r\n  ]).then(function ([goldenGlobes, imdb, movies, oscars]) {\r\n    imdb = processMovieData(imdb)\r\n    const maxYear = imdb.reduce((max, movie) => movie.year > max ? movie.year : max, Number.MIN_VALUE)\r\n\r\n    imdb.forEach(movie => {\r\n      if (movie.box_office && typeof movie.box_office !== 'string') movie.box_office = adjustForInflation(movie.box_office, movie.year, maxYear)\r\n      if (movie.budget && typeof movie.budget !== 'string') movie.budget = adjustForInflation(movie.budget, movie.year, maxYear)\r\n    })\r\n\r\n    const movieNames = imdb.reduce((acc, movie) => {\r\n      if (!movie.name) return acc\r\n\r\n      const nameStr = String(movie.name)\r\n      const cleanName = nameStr.toLowerCase().replace(/[^a-z0-9\\s]/g, '')\r\n\r\n      if (!acc.includes(cleanName) && cleanName.trim() !== '') acc.push(cleanName)\r\n      return acc\r\n    }, [])\r\n\r\n    const oscarMovies = getOscarsMovieData(oscars, movieNames)\r\n    imdb = addOscarsData(imdb, oscarMovies)\r\n\r\n    const goldenGlobesMovies = getGoldenGlobesMovieData(goldenGlobes, movieNames)\r\n    imdb = addGoldenGlobesData(imdb, goldenGlobesMovies)\r\n\r\n    const additionalMovieData = getAdditionalMovieData(movies, movieNames)\r\n    imdb = addAdditionalMovieData(imdb, additionalMovieData)\r\n\r\n    imdb = calculateMovieProfits(imdb)\r\n    console.log(imdb)\r\n\r\n    const contributorData = getFilmContributorsData(imdb)\r\n    const genreIntervalData = getGenreDataIntervals(imdb)\r\n    const genreData = getMoviesByGenre(imdb)\r\n    console.log(genreData)\r\n\r\n    const collaborationsData = getTopCollaborations(imdb)\r\n\r\n    const certificateData = getCertificateData(imdb)\r\n    const seasonalData = getDataBySeason(imdb)\r\n\r\n    const movieLengthData = getMovieLengthData(imdb)\r\n    const taglineWordData = getTaglineWordsData(imdb)\r\n    const taglineLengthData = getTaglineLengthData(imdb)\r\n\r\n    // }, [])\r\n    // d3.csv('./golden_globe_awards.csv', d3.autoType).then(function (data) {\r\n    //   console.log(data)\r\n    //   const neighborhoodNames = preproc.getNeighborhoodNames(data)\r\n    //   data = preproc.filterYears(data, 2010, 2020)\r\n\r\n    //   data = preproc.summarizeYearlyCounts(data)\r\n    //   data = preproc.fillMissingData(data, neighborhoodNames, 2010, 2020, util.range)\r\n\r\n    // viz.setColorScaleDomain(colorScale, data)\r\n\r\n    // legend.initGradient(colorScale)\r\n    // legend.initLegendBar()\r\n    // legend.initLegendAxis()\r\n\r\n    // const g = helper.generateG(margin)\r\n\r\n    // helper.appendAxes(g)\r\n    // viz.appendRects(data)\r\n\r\n    // setSizing()\r\n    // build()\r\n\r\n    /**\r\n     *   This function handles the graph's sizing.\r\n     */\r\n    // function setSizing () {\r\n    //   bounds = d3.select('.graph').node().getBoundingClientRect()\r\n\r\n    //   svgSize = {\r\n    //     width: bounds.width,\r\n    //     height: 550\r\n    //   }\r\n\r\n    //   graphSize = {\r\n    //     width: svgSize.width - margin.right - margin.left,\r\n    //     height: svgSize.height - margin.bottom - margin.top\r\n    //   }\r\n\r\n    //   helper.setCanvasSize(svgSize.width, svgSize.height)\r\n    // }\r\n\r\n    /**\r\n     *   This function builds the graph.\r\n     */\r\n    // function build () {\r\n    //   viz.updateXScale(xScale, data, graphSize.width, util.range)\r\n    //   viz.updateYScale(yScale, neighborhoodNames, graphSize.height)\r\n\r\n    //   viz.drawXAxis(xScale)\r\n    //   viz.drawYAxis(yScale, graphSize.width)\r\n\r\n    //   viz.rotateYTicks()\r\n\r\n    //   viz.updateRects(xScale, yScale, colorScale)\r\n\r\n    //   hover.setRectHandler(xScale, yScale, hover.rectSelected, hover.rectUnselected, hover.selectTicks, hover.unselectTicks)\r\n\r\n    //   legend.draw(margin.left / 2, margin.top + 5, graphSize.height - 10, 15, 'url(#gradient)', colorScale)\r\n    // }\r\n\r\n    // window.addEventListener('resize', () => {\r\n    //   setSizing()\r\n    //   build()\r\n    // })\r\n  })\r\n})(d3)\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\r\n\r\nvar OldModule = module.bundle.Module;\r\n\r\nfunction Module(moduleName) {\r\n  OldModule.call(this, moduleName);\r\n  this.hot = {\r\n    data: module.bundle.hotData,\r\n    _acceptCallbacks: [],\r\n    _disposeCallbacks: [],\r\n    accept: function (fn) {\r\n      this._acceptCallbacks.push(fn || function () {});\r\n    },\r\n    dispose: function (fn) {\r\n      this._disposeCallbacks.push(fn);\r\n    }\r\n  };\r\n\r\n  module.bundle.hotData = null;\r\n}\r\n\r\nmodule.bundle.Module = Module;\r\nvar checkedAssets, assetsToAccept;\r\n\r\nvar parent = module.bundle.parent;\r\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\r\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\r\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\r\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\r\n  ws.onmessage = function(event) {\r\n    checkedAssets = {};\r\n    assetsToAccept = [];\r\n\r\n    var data = JSON.parse(event.data);\r\n\r\n    if (data.type === 'update') {\r\n      var handled = false;\r\n      data.assets.forEach(function(asset) {\r\n        if (!asset.isNew) {\r\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\r\n          if (didAccept) {\r\n            handled = true;\r\n          }\r\n        }\r\n      });\r\n\r\n      // Enable HMR for CSS by default.\r\n      handled = handled || data.assets.every(function(asset) {\r\n        return asset.type === 'css' && asset.generated.js;\r\n      });\r\n\r\n      if (handled) {\r\n        console.clear();\r\n\r\n        data.assets.forEach(function (asset) {\r\n          hmrApply(global.parcelRequire, asset);\r\n        });\r\n\r\n        assetsToAccept.forEach(function (v) {\r\n          hmrAcceptRun(v[0], v[1]);\r\n        });\r\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\r\n        location.reload();\r\n      }\r\n    }\r\n\r\n    if (data.type === 'reload') {\r\n      ws.close();\r\n      ws.onclose = function () {\r\n        location.reload();\r\n      }\r\n    }\r\n\r\n    if (data.type === 'error-resolved') {\r\n      console.log('[parcel] ✨ Error resolved');\r\n\r\n      removeErrorOverlay();\r\n    }\r\n\r\n    if (data.type === 'error') {\r\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\r\n\r\n      removeErrorOverlay();\r\n\r\n      var overlay = createErrorOverlay(data);\r\n      document.body.appendChild(overlay);\r\n    }\r\n  };\r\n}\r\n\r\nfunction removeErrorOverlay() {\r\n  var overlay = document.getElementById(OVERLAY_ID);\r\n  if (overlay) {\r\n    overlay.remove();\r\n  }\r\n}\r\n\r\nfunction createErrorOverlay(data) {\r\n  var overlay = document.createElement('div');\r\n  overlay.id = OVERLAY_ID;\r\n\r\n  // html encode message and stack trace\r\n  var message = document.createElement('div');\r\n  var stackTrace = document.createElement('pre');\r\n  message.innerText = data.error.message;\r\n  stackTrace.innerText = data.error.stack;\r\n\r\n  overlay.innerHTML = (\r\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\r\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\r\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\r\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\r\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\r\n    '</div>'\r\n  );\r\n\r\n  return overlay;\r\n\r\n}\r\n\r\nfunction getParents(bundle, id) {\r\n  var modules = bundle.modules;\r\n  if (!modules) {\r\n    return [];\r\n  }\r\n\r\n  var parents = [];\r\n  var k, d, dep;\r\n\r\n  for (k in modules) {\r\n    for (d in modules[k][1]) {\r\n      dep = modules[k][1][d];\r\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\r\n        parents.push(k);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (bundle.parent) {\r\n    parents = parents.concat(getParents(bundle.parent, id));\r\n  }\r\n\r\n  return parents;\r\n}\r\n\r\nfunction hmrApply(bundle, asset) {\r\n  var modules = bundle.modules;\r\n  if (!modules) {\r\n    return;\r\n  }\r\n\r\n  if (modules[asset.id] || !bundle.parent) {\r\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\r\n    asset.isNew = !modules[asset.id];\r\n    modules[asset.id] = [fn, asset.deps];\r\n  } else if (bundle.parent) {\r\n    hmrApply(bundle.parent, asset);\r\n  }\r\n}\r\n\r\nfunction hmrAcceptCheck(bundle, id) {\r\n  var modules = bundle.modules;\r\n  if (!modules) {\r\n    return;\r\n  }\r\n\r\n  if (!modules[id] && bundle.parent) {\r\n    return hmrAcceptCheck(bundle.parent, id);\r\n  }\r\n\r\n  if (checkedAssets[id]) {\r\n    return;\r\n  }\r\n  checkedAssets[id] = true;\r\n\r\n  var cached = bundle.cache[id];\r\n\r\n  assetsToAccept.push([bundle, id]);\r\n\r\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\r\n    return true;\r\n  }\r\n\r\n  return getParents(global.parcelRequire, id).some(function (id) {\r\n    return hmrAcceptCheck(global.parcelRequire, id)\r\n  });\r\n}\r\n\r\nfunction hmrAcceptRun(bundle, id) {\r\n  var cached = bundle.cache[id];\r\n  bundle.hotData = {};\r\n  if (cached) {\r\n    cached.hot.data = bundle.hotData;\r\n  }\r\n\r\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\r\n    cached.hot._disposeCallbacks.forEach(function (cb) {\r\n      cb(bundle.hotData);\r\n    });\r\n  }\r\n\r\n  delete bundle.cache[id];\r\n  bundle(id);\r\n\r\n  cached = bundle.cache[id];\r\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\r\n    cached.hot._acceptCallbacks.forEach(function (cb) {\r\n      cb();\r\n    });\r\n    return true;\r\n  }\r\n}\r\n"]}